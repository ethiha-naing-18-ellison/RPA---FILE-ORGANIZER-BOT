{% extends "base.html" %}

{% block title %}File Organizer Bot - Results{% endblock %}

{% block subtitle %}Organization Complete!{% endblock %}

{% block content %}
<div class="result-container">
    {% if success %}
        <div class="alert alert-success">
            âœ… {{ message }}
        </div>
        
        <div class="summary-box">
            <h2 style="color: #2c3e50; margin-bottom: 20px; text-align: center;">ğŸ“Š Organization Summary</h2>
            
            <div class="summary-item">
                <strong>ğŸ“‚ Selected Folder:</strong>
                <div class="path-display">{{ folder_path }}</div>
            </div>
            
            <div class="summary-item">
                <strong>ğŸ“ Organized Files Location:</strong>
                <div class="path-display">{{ organized_path }}</div>
            </div>
            
            <div class="summary-item">
                <strong>ğŸ“ˆ Total Files Moved:</strong> 
                <span style="color: #27ae60; font-size: 1.5em; font-weight: bold;">{{ total_files }}</span>
            </div>
        </div>
        
        {% if stats %}
        <div class="summary-box">
            <h3 style="color: #2c3e50; margin-bottom: 15px;">ğŸ“‹ Files by Category:</h3>
            
            <div class="stats-grid">
                {% for category, count in stats.items() %}
                <div class="stat-card">
                    <div class="stat-number">{{ count }}</div>
                    <div class="stat-label">
                        {% if category == 'PDFs' %}ğŸ“„ PDFs{% endif %}
                        {% if category == 'Word' %}ğŸ“ Word{% endif %}
                        {% if category == 'Excel' %}ğŸ“Š Excel{% endif %}
                        {% if category == 'PowerPoint' %}ğŸ¨ PowerPoint{% endif %}
                        {% if category == 'Text' %}ğŸ“‹ Text{% endif %}
                        {% if category == 'Images' %}ğŸ–¼ï¸ Images{% endif %}
                        {% if category == 'Videos' %}ğŸ¥ Videos{% endif %}
                        {% if category == 'Audio' %}ğŸµ Audio{% endif %}
                        {% if category == 'Archives' %}ğŸ—œï¸ Archives{% endif %}
                        {% if category == 'Executables' %}âš™ï¸ Executables{% endif %}
                        {% if category == 'Code' %}ğŸ’» Code{% endif %}
                        {% if category == 'Web' %}ğŸŒ Web{% endif %}
                        {% if category == 'Data' %}ğŸ“Š Data{% endif %}
                        {% if category == 'Design' %}ğŸ¨ Design{% endif %}
                        {% if category == 'System' %}ğŸ› ï¸ System{% endif %}
                        {% if category == 'Fonts' %}ğŸ”¤ Fonts{% endif %}
                        {% if category == 'Ebooks' %}ğŸ“š Ebooks{% endif %}
                        {% if category == 'DiskImages' %}ğŸ’½ Disk Images{% endif %}
                        {% if category == 'Backup' %}ğŸ—ƒï¸ Backup{% endif %}
                        {% if category == 'Certificates' %}ğŸ” Certificates{% endif %}
                        {% if category == 'CAD' %}ğŸ“ CAD{% endif %}
                        {% if category == '3D_Models' %}ğŸ² 3D Models{% endif %}
                        {% if category == 'Email' %}ğŸ“§ Email{% endif %}
                        {% if category == 'Calendar' %}ğŸ“… Calendar{% endif %}
                        {% if category == 'Others' %}ğŸ“¦ Others{% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        
        {% if errors %}
        <div class="error-list">
            <h3 style="color: #e53e3e; margin-bottom: 10px;">âš ï¸ Errors Encountered:</h3>
            <ul>
                {% for error in errors %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        
        <div class="summary-box" style="text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
            <h3 style="margin-bottom: 15px;">ğŸ‰ Organization Completed Successfully!</h3>
            <p style="font-size: 1.1em;">All files have been moved to their respective subfolders.</p>
            <p style="margin-top: 10px; opacity: 0.9;">You can now find your organized files in the location shown above.</p>
        </div>
        
    {% else %}
        <div class="alert alert-error">
            âŒ Organization failed. Please try again.
        </div>
    {% endif %}
    
    <div style="text-align: center; margin-top: 30px;">
        <a href="{{ url_for('index') }}" class="btn btn-back">
            â† Back to Home
        </a>
        {% if success %}
        <button onclick="openFolder()" class="btn" style="margin-left: 10px;">
            ğŸ“ Open Organized Folder
        </button>
        {% endif %}
    </div>
</div>

<script>
function openFolder() {
    const path = "{{ organized_path|safe }}";
    // This won't work in browsers due to security restrictions,
    // but we'll show the path in an alert for now
    alert("Please navigate to this folder in your file explorer:\n\n" + path);
}

// Add confetti effect for successful organization
{% if success and total_files > 0 %}
document.addEventListener('DOMContentLoaded', function() {
    // Simple celebration animation
    const emojis = ['ğŸ‰', 'ğŸŠ', 'âœ¨', 'ğŸŒŸ', 'ğŸ’«'];
    
    for (let i = 0; i < 20; i++) {
        setTimeout(function() {
            createFloatingEmoji(emojis[Math.floor(Math.random() * emojis.length)]);
        }, i * 100);
    }
    
    function createFloatingEmoji(emoji) {
        const span = document.createElement('span');
        span.textContent = emoji;
        span.style.position = 'fixed';
        span.style.left = Math.random() * window.innerWidth + 'px';
        span.style.top = window.innerHeight + 'px';
        span.style.fontSize = '24px';
        span.style.zIndex = '1000';
        span.style.pointerEvents = 'none';
        span.style.transition = 'transform 3s ease-out, opacity 3s ease-out';
        
        document.body.appendChild(span);
        
        // Animate upward
        setTimeout(function() {
            span.style.transform = 'translateY(-' + (window.innerHeight + 100) + 'px) rotate(360deg)';
            span.style.opacity = '0';
        }, 100);
        
        // Remove element after animation
        setTimeout(function() {
            if (span.parentNode) {
                document.body.removeChild(span);
            }
        }, 3000);
    }
});
{% endif %}
</script>
{% endblock %}